@import "tailwindcss";

@plugin "@tailwindcss/forms" { strategy: "class" };
@plugin "@tailwindcss/typography";

@layer base {
  :root {
    color-scheme: dark;
    --ui-bg: #0b1220;
    --ui-surface: #111827;
    --ui-surface-2: #1f2937;
    --ui-surface-3: #0b1220;
    --ui-border: rgba(148, 163, 184, 0.18);
    --ui-border-strong: rgba(148, 163, 184, 0.28);
    --ui-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset, 0 18px 48px rgba(0, 0, 0, 0.55);
    --ui-shadow-sm: 0 1px 0 rgba(255, 255, 255, 0.06) inset, 0 10px 26px rgba(0, 0, 0, 0.45);
    --ui-text-100: #f1f5f9;
    --ui-text-200: #e2e8f0;
    --ui-text-300: #cbd5e1;
    --ui-text-400: #94a3b8;
    --ui-link: #38bdf8;
    --ui-link-hover: #7dd3fc;
    --ui-input-scheme: dark;
    --ui-input-text: #f1f5f9;
    --ui-input-placeholder: #94a3b8;
    --ui-select-option-bg: #111827;
    --ui-select-option-text: #f1f5f9;
    --ui-select-optgroup-text: #e2e8f0;
    --ui-select-option-active-bg: #0ea5e9;
    --ui-select-option-active-text: #020617;
    --ui-select-arrow: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%23cbd5f5"%3E%3Cpath fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.173l3.71-3.94a.75.75 0 011.08 1.04l-4.24 4.5a.75.75 0 01-1.08 0l-4.24-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" /%3E%3C/svg%3E');
    --ui-divider: rgba(148, 163, 184, 0.16);
    --ui-hover-surface: rgba(148, 163, 184, 0.09);
    --ui-accent-surface: rgba(56, 189, 248, 0.14);
    --ui-accent-border: rgba(56, 189, 248, 0.36);
    --ui-footer-bg: rgba(2, 6, 23, 0.9);
    --ui-footer-border: rgba(30, 41, 59, 0.8);
    --ui-footer-text: #cbd5e1;
    --ui-footer-text-hover: #f1f5f9;
  }

  :root[data-theme='light'] {
    color-scheme: light;
    --ui-bg: #eef4fb;
    --ui-surface: #ffffff;
    --ui-surface-2: #f8fafc;
    --ui-surface-3: #edf2f7;
    --ui-border: rgba(51, 65, 85, 0.15);
    --ui-border-strong: rgba(51, 65, 85, 0.26);
    --ui-shadow: 0 1px 0 rgba(255, 255, 255, 0.9) inset, 0 16px 38px rgba(15, 23, 42, 0.13);
    --ui-shadow-sm: 0 1px 0 rgba(255, 255, 255, 0.92) inset, 0 8px 18px rgba(15, 23, 42, 0.1);
    --ui-text-100: #0f172a;
    --ui-text-200: #1e293b;
    --ui-text-300: #334155;
    --ui-text-400: #64748b;
    --ui-link: #0369a1;
    --ui-link-hover: #0284c7;
    --ui-input-scheme: light;
    --ui-input-text: #0f172a;
    --ui-input-placeholder: #64748b;
    --ui-select-option-bg: #ffffff;
    --ui-select-option-text: #0f172a;
    --ui-select-optgroup-text: #1e293b;
    --ui-select-option-active-bg: #bae6fd;
    --ui-select-option-active-text: #0c4a6e;
    --ui-select-arrow: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%23334155"%3E%3Cpath fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.173l3.71-3.94a.75.75 0 011.08 1.04l-4.24 4.5a.75.75 0 01-1.08 0l-4.24-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" /%3E%3C/svg%3E');
    --ui-divider: rgba(51, 65, 85, 0.18);
    --ui-hover-surface: rgba(51, 65, 85, 0.08);
    --ui-accent-surface: rgba(14, 165, 233, 0.16);
    --ui-accent-border: rgba(14, 165, 233, 0.3);
    --ui-footer-bg: rgba(255, 255, 255, 0.9);
    --ui-footer-border: rgba(148, 163, 184, 0.55);
    --ui-footer-text: #475569;
    --ui-footer-text-hover: #0f172a;
  }

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  body {
    @apply m-0 min-h-screen font-sans antialiased;
    color: var(--ui-text-100);
    background-color: var(--ui-bg);
  }

  a {
    @apply font-medium no-underline transition-colors;
    color: var(--ui-link);
  }

  a:hover {
    color: var(--ui-link-hover);
  }

  button:focus-visible,
  input:focus-visible,
  select:focus-visible {
    outline: 2px solid #38bdf8;
    outline-offset: 2px;
  }
}

@layer components {
  .field-control,
  .field-select {
    color-scheme: var(--ui-input-scheme);
    @apply w-full min-w-0 rounded-lg px-3 py-2 text-sm transition-colors disabled:cursor-not-allowed disabled:opacity-60;
    color: var(--ui-input-text);
    border: 1px solid var(--ui-border);
    background-clip: padding-box;
    box-shadow:
      0 1px 0 rgba(255, 255, 255, 0.06) inset;
    background-color: var(--ui-surface-3);
  }

  .field-control::placeholder,
  .field-select::placeholder {
    color: var(--ui-input-placeholder);
  }

  .field-control:hover,
  .field-select:hover {
    border-color: var(--ui-border-strong);
    box-shadow:
      0 1px 0 rgba(255, 255, 255, 0.08) inset;
  }

  .field-control:focus-visible,
  .field-select:focus-visible {
    outline: 2px solid rgba(56, 189, 248, 0.95);
    outline-offset: 2px;
    border-color: rgba(125, 211, 252, 0.95);
    box-shadow:
      0 0 0 3px rgba(56, 189, 248, 0.22),
      0 1px 0 rgba(255, 255, 255, 0.08) inset;
  }

  .field-select.unit-flash {
    animation: unit-flash 0.65s ease-out;
  }

  .field-select {
    @apply appearance-none pr-10;
    background-image: var(--ui-select-arrow);
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 0.85rem;
    padding-right: 2.5rem;
  }

  .field-select option {
    background-color: var(--ui-select-option-bg);
    color: var(--ui-select-option-text);
  }

  .field-select optgroup {
    background-color: var(--ui-select-option-bg);
    color: var(--ui-select-optgroup-text);
  }

  .field-select option:checked,
  .field-select option:hover,
  .field-select option:focus {
    background-color: var(--ui-select-option-active-bg);
    color: var(--ui-select-option-active-text);
  }

  .field-select:focus-visible option:checked {
    outline: none;
  }

  @keyframes unit-flash {
    0% {
      border-color: rgba(250, 204, 21, 0.8);
      box-shadow:
        0 0 0 3px rgba(250, 204, 21, 0.18),
        0 1px 0 rgba(255, 255, 255, 0.08) inset;
    }
    100% {
      border-color: var(--ui-border);
      box-shadow:
        0 1px 0 rgba(255, 255, 255, 0.06) inset;
    }
  }

  .field-checkbox,
  .field-radio {
    @apply text-sky-500;
    border-color: var(--ui-border-strong);
    background-color: var(--ui-surface-3);
  }

  .ui-panel {
    @apply rounded-xl;
    color: var(--ui-text-100);
    background-color: var(--ui-surface);
    border: 1px solid var(--ui-border);
    box-shadow: var(--ui-shadow);
  }

  .ui-card {
    @apply rounded-xl;
    color: var(--ui-text-100);
    background-color: var(--ui-surface-2);
    border: 1px solid var(--ui-border);
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.05) inset;
  }

  .ui-inset {
    @apply rounded-xl;
    background-color: var(--ui-surface-3);
    border: 1px solid rgba(148, 163, 184, 0.14);
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.04) inset;
  }

  .ui-chip {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold uppercase tracking-wide;
    color: var(--ui-text-200);
    background-color: var(--ui-surface-3);
    border: 1px solid var(--ui-border);
  }

  .ui-divider {
    @apply h-px;
    background-color: var(--ui-divider);
  }

  .ui-tab {
    @apply inline-flex items-center rounded-lg px-3 py-2 text-xs font-semibold tracking-wide transition-colors;
    color: var(--ui-text-300);
    background-color: var(--ui-surface-3);
    border: 1px solid var(--ui-border);
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.04) inset;
  }

  .ui-tab-active {
    color: var(--ui-text-100);
    background-color: var(--ui-accent-surface);
    border-color: var(--ui-accent-border);
  }

  .ui-button {
    @apply inline-flex items-center justify-center rounded-lg px-3 py-1.5 text-sm font-semibold transition-colors disabled:cursor-not-allowed disabled:opacity-60;
    color: var(--ui-text-100);
    background-color: var(--ui-surface-2);
    border: 1px solid var(--ui-border);
    box-shadow: var(--ui-shadow-sm);
  }

  .ui-tab:hover:not(.ui-tab-active) {
    border-color: var(--ui-border-strong);
    background-color: var(--ui-hover-surface);
    color: var(--ui-text-100);
  }

  .ui-button:hover:not(:disabled) {
    border-color: var(--ui-border-strong);
    background-color: var(--ui-hover-surface);
    color: var(--ui-text-100);
  }

  .ui-button:active {
    transform: translateY(0.5px);
  }

  .ui-summary {
    list-style: none;
  }

  .ui-summary::-webkit-details-marker {
    display: none;
  }

  .theme-toggle {
    color: var(--ui-text-300);
  }

  .theme-toggle:hover:not(:disabled) {
    color: var(--ui-text-100);
  }

  .theme-toggle-track {
    position: relative;
    display: inline-flex;
    height: 1.15rem;
    width: 2.2rem;
    align-items: center;
    border-radius: 9999px;
    border: 1px solid var(--ui-border-strong);
    background-color: var(--ui-surface-3);
    padding: 0.08rem;
  }

  .theme-toggle-thumb {
    display: block;
    height: 0.88rem;
    width: 0.88rem;
    border-radius: 9999px;
    background-color: #f59e0b;
    transition:
      transform 160ms ease,
      background-color 160ms ease;
  }

  .theme-toggle-thumb.is-light {
    transform: translateX(1rem);
    background-color: #0ea5e9;
  }

  .app-footer {
    border-top: 1px solid var(--ui-footer-border);
    background-color: var(--ui-footer-bg);
    color: var(--ui-footer-text);
    backdrop-filter: blur(10px);
  }

  .app-footer-link {
    color: var(--ui-footer-text);
  }

  .app-footer-link:hover {
    color: var(--ui-footer-text-hover);
  }
}

@layer utilities {
  .bg-surface {
    background-color: var(--ui-surface);
  }

  .bg-surface-raised {
    background-color: var(--ui-surface-2);
  }

  .bg-surface-sunken {
    background-color: var(--ui-surface-3);
  }
}

:root[data-theme='light'] .text-slate-100 {
  color: var(--ui-text-100);
}

:root[data-theme='light'] .text-slate-200 {
  color: var(--ui-text-200);
}

:root[data-theme='light'] .text-slate-300 {
  color: var(--ui-text-300);
}

:root[data-theme='light'] .text-slate-400 {
  color: var(--ui-text-400);
}

:root[data-theme='light'] .border-slate-800\/80 {
  border-color: var(--ui-footer-border);
}

:root[data-theme='light'] .border-slate-700 {
  border-color: rgba(148, 163, 184, 0.6);
}

:root[data-theme='light'] .border-slate-700\/40 {
  border-color: rgba(148, 163, 184, 0.45);
}

:root[data-theme='light'] .border-slate-600\/40 {
  border-color: rgba(100, 116, 139, 0.35);
}

:root[data-theme='light'] .hover\:border-slate-500\/60:hover {
  border-color: rgba(100, 116, 139, 0.45);
}

:root[data-theme='light'] .divide-slate-800 > :not([hidden]) ~ :not([hidden]),
:root[data-theme='light'] .md\:divide-slate-800 > :not([hidden]) ~ :not([hidden]) {
  border-color: rgba(148, 163, 184, 0.42);
}

:root[data-theme='light'] .bg-slate-700\/40 {
  background-color: rgba(148, 163, 184, 0.32);
}
