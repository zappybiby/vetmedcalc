@import "tailwindcss";

@plugin "@tailwindcss/forms" { strategy: "class" };
@plugin "@tailwindcss/typography";

@layer base {
  :root {
    color-scheme: dark;
    --ui-bg: #0b1220;
    --ui-surface: #111827;
    --ui-surface-2: #1f2937;
    --ui-surface-3: #0b1220;
    --ui-border: rgba(148, 163, 184, 0.18);
    --ui-border-strong: rgba(148, 163, 184, 0.28);
    --ui-shadow: 0 1px 0 rgba(255, 255, 255, 0.06) inset, 0 18px 48px rgba(0, 0, 0, 0.55);
    --ui-shadow-sm: 0 1px 0 rgba(255, 255, 255, 0.06) inset, 0 10px 26px rgba(0, 0, 0, 0.45);
  }

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  body {
    @apply m-0 min-h-screen font-sans text-slate-100 antialiased;
    background-color: var(--ui-bg);
  }

  a {
    @apply font-medium text-sky-400 no-underline transition-colors hover:text-sky-300;
  }

  button:focus-visible,
  input:focus-visible,
  select:focus-visible {
    outline: 2px solid #38bdf8;
    outline-offset: 2px;
  }
}

@layer components {
  .field-control,
  .field-select {
    color-scheme: dark;
    @apply w-full min-w-0 rounded-lg px-3 py-2 text-sm text-slate-100 placeholder:text-slate-400 transition-colors disabled:cursor-not-allowed disabled:opacity-60;
    border: 1px solid var(--ui-border);
    background-clip: padding-box;
    box-shadow:
      0 1px 0 rgba(255, 255, 255, 0.06) inset;
    background-color: var(--ui-surface-3);
  }

  .field-control:hover,
  .field-select:hover {
    border-color: var(--ui-border-strong);
    box-shadow:
      0 1px 0 rgba(255, 255, 255, 0.08) inset;
  }

  .field-control:focus-visible,
  .field-select:focus-visible {
    outline: 2px solid rgba(56, 189, 248, 0.95);
    outline-offset: 2px;
    border-color: rgba(125, 211, 252, 0.95);
    box-shadow:
      0 0 0 3px rgba(56, 189, 248, 0.22),
      0 1px 0 rgba(255, 255, 255, 0.08) inset;
  }

  .field-select.unit-flash {
    animation: unit-flash 0.65s ease-out;
  }

  .field-select {
    @apply appearance-none pr-10;
    background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="%23cbd5f5"%3E%3Cpath fill-rule="evenodd" d="M5.23 7.21a.75.75 0 011.06.02L10 11.173l3.71-3.94a.75.75 0 011.08 1.04l-4.24 4.5a.75.75 0 01-1.08 0l-4.24-4.5a.75.75 0 01.02-1.06z" clip-rule="evenodd" /%3E%3C/svg%3E');
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 0.85rem;
    padding-right: 2.5rem;
  }

  .field-select option {
    background-color: #111827; /* surface.DEFAULT */
    color: #f1f5f9; /* slate-100 */
  }

  .field-select optgroup {
    background-color: #111827;
    color: #e2e8f0; /* slate-200 */
  }

  .field-select option:checked,
  .field-select option:hover,
  .field-select option:focus {
    background-color: #0ea5e9; /* sky-500 */
    color: #020617; /* slate-950 */
  }

  .field-select:focus-visible option:checked {
    outline: none;
  }

  @keyframes unit-flash {
    0% {
      border-color: rgba(250, 204, 21, 0.8);
      box-shadow:
        0 0 0 3px rgba(250, 204, 21, 0.18),
        0 1px 0 rgba(255, 255, 255, 0.08) inset;
    }
    100% {
      border-color: var(--ui-border);
      box-shadow:
        0 1px 0 rgba(255, 255, 255, 0.06) inset;
    }
  }

  .field-checkbox,
  .field-radio {
    @apply border-slate-500 text-sky-400;
    background-color: var(--ui-surface-3);
  }

  .ui-panel {
    @apply rounded-xl text-slate-100;
    background-color: var(--ui-surface);
    border: 1px solid var(--ui-border);
    box-shadow: var(--ui-shadow);
  }

  .ui-card {
    @apply rounded-xl text-slate-100;
    background-color: var(--ui-surface-2);
    border: 1px solid var(--ui-border);
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.05) inset;
  }

  .ui-inset {
    @apply rounded-xl;
    background-color: var(--ui-surface-3);
    border: 1px solid rgba(148, 163, 184, 0.14);
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.04) inset;
  }

  .ui-chip {
    @apply inline-flex items-center rounded-full px-2 py-0.5 text-xs font-semibold uppercase tracking-wide text-slate-200;
    background-color: var(--ui-surface-3);
    border: 1px solid var(--ui-border);
  }

  .ui-divider {
    @apply h-px;
    background-color: rgba(148, 163, 184, 0.16);
  }

  .ui-tab {
    @apply inline-flex items-center rounded-lg px-3 py-2 text-xs font-semibold tracking-wide text-slate-300 transition-colors;
    background-color: var(--ui-surface-3);
    border: 1px solid var(--ui-border);
    box-shadow: 0 1px 0 rgba(255, 255, 255, 0.04) inset;
  }

  .ui-tab-active {
    @apply text-slate-100;
    background-color: rgba(56, 189, 248, 0.14);
    border-color: rgba(56, 189, 248, 0.36);
  }

  .ui-button {
    @apply inline-flex items-center justify-center rounded-lg px-3 py-1.5 text-sm font-semibold text-slate-100 transition-colors disabled:cursor-not-allowed disabled:opacity-60;
    background-color: var(--ui-surface-2);
    border: 1px solid var(--ui-border);
    box-shadow: var(--ui-shadow-sm);
  }

  .ui-tab:hover:not(.ui-tab-active) {
    border-color: var(--ui-border-strong);
    background-color: rgba(148, 163, 184, 0.09);
    color: #f1f5f9;
  }

  .ui-button:hover:not(:disabled) {
    border-color: var(--ui-border-strong);
    background-color: rgba(148, 163, 184, 0.09);
    color: #f1f5f9;
  }

  .ui-button:active {
    transform: translateY(0.5px);
  }

  .ui-summary {
    list-style: none;
  }

  .ui-summary::-webkit-details-marker {
    display: none;
  }
}

@layer utilities {
  .bg-surface {
    background-color: var(--ui-surface);
  }

  .bg-surface-raised {
    background-color: var(--ui-surface-2);
  }

  .bg-surface-sunken {
    background-color: var(--ui-surface-3);
  }
}
